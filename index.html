<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Piano Notes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin: 0;
  background: linear-gradient(135deg,#667eea,#764ba2);
  font-family: sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
}

canvas {
  background: white;
  border-radius: 10px;
  margin-top: 20px;
}

.piano {
  position: relative;
  width: 90%;
  max-width: 800px;
  height: 180px;
  margin-top: 30px;
  background: #111;
  border-radius: 10px;
}

.white {
  display: flex;
  height: 100%;
}

.white div {
  flex: 1;
  background: white;
  border: 1px solid #ccc;
  cursor: pointer;
}

.white div.active { background: #4ade80; }
.white div.wrong  { background: #fb7185; }

.black {
  position: absolute;
  top: 0;
  left: 0;
  height: 60%;
  width: 100%;
}

.black div {
  position: absolute;
  width: 6%;
  height: 100%;
  background: black;
  border-radius: 0 0 4px 4px;
  cursor: pointer;
}
.black div.active { background: #22c55e; }
.black div.wrong  { background: #ef4444; }

.controls {
  margin-top: 15px;
}
</style>
</head>

<body>

<canvas id="staff" width="700" height="240"></canvas>

<div class="controls">
  <button onclick="setClef('treble')">Treble</button>
  <button onclick="setClef('bass')">Bass</button>
  <span id="info"></span>
</div>

<div class="piano">
  <div class="white" id="white"></div>
  <div class="black" id="black"></div>
</div>

<script>
/* ================= MUSICAL DATA ================= */

const TREBLE_NOTES = [
 'E4','F4','G4','A4','B4','C5','D5',
 'E5','F5','G5','A5','B5','C6'
];

const BASS_NOTES = [
 'G2','A2','B2','C3','D3','E3','F3',
 'G3','A3','B3','C4'
];

const POSITIONS = {
  treble: {
    E4:9,F4:8,G4:7,A4:6,B4:5,C5:4,D5:3,E5:2,F5:1
  },
  bass: {
    G2:9,A2:8,B2:7,C3:6,D3:5,E3:4,F3:3,G3:2,A3:1
  }
};

/* ================= STATE ================= */

let clef = 'treble';
let currentNote = '';
const canvas = document.getElementById('staff');
const ctx = canvas.getContext('2d');

const noteImg = new Image();
noteImg.src = '3.png';

/* ================= STAFF ================= */

function drawStaff() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const spacing = 22;
  const startY = 60;

  for(let i=0;i<5;i++){
    ctx.beginPath();
    ctx.moveTo(50,startY+i*spacing);
    ctx.lineTo(canvas.width-50,startY+i*spacing);
    ctx.stroke();
  }

  ctx.font = '40px serif';
  ctx.fillText(clef==='treble'?'ð„ž':'ð„¢',30,startY+spacing*3);
}

function drawNote() {
  const spacing = 22;
  const startY = 60;
  const pos = POSITIONS[clef][currentNote];

  const y = startY + (pos-1)*spacing/2;
  ctx.drawImage(noteImg,250,y-12,20,24);
}

/* ================= GAME ================= */

function newNote() {
  const list = clef==='treble'?TREBLE_NOTES:BASS_NOTES;
  currentNote = list[Math.floor(Math.random()*list.length)];
  drawStaff();
  drawNote();
  document.getElementById('info').textContent = currentNote;
}

function setClef(c) {
  clef = c;
  newNote();
}

/* ================= PIANO ================= */

const whiteNotes = ['C','D','E','F','G','A','B'];
const white = document.getElementById('white');
const black = document.getElementById('black');

whiteNotes.forEach(n=>{
  const k=document.createElement('div');
  k.onclick=()=>check(n);
  white.appendChild(k);
});

[
 {n:'C#',l:10},{n:'D#',l:23},
 {n:'F#',l:52},{n:'G#',l:65},{n:'A#',l:78}
].forEach(b=>{
  const k=document.createElement('div');
  k.style.left=b.l+'%';
  k.onclick=()=>check(b.n);
  black.appendChild(k);
});

function check(n){
  const base=currentNote.replace(/\d/,'');
  if(base===n){
    newNote();
  }
}

/* ================= START ================= */

noteImg.onload = newNote;
</script>

</body>
</html>
